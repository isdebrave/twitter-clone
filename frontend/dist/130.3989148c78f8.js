"use strict";(self.webpackChunktwitter_clone=self.webpackChunktwitter_clone||[]).push([[130],{8035:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(7294),l=n(1649);const a=function(e){var t=e.title,n=e.length,a=e.onClick,o=e.backdropBlur;return r.createElement("div",{className:"\n        z-10 \n        sticky \n        top-0 \n        bg-white/70\n        flex \n        items-center \n        py-1 \n        px-2 \n        gap-6\n        ".concat(o&&"backdrop-blur-lg","\n      ")},r.createElement("div",{onClick:a,className:"p-2 rounded-full hover:bg-neutral-300/40 cursor-pointer"},r.createElement(l.UkU,{size:20})),r.createElement("div",{className:"flex flex-col"},r.createElement("span",{className:"font-bold text-lg"},t),void 0!==n&&r.createElement("span",{className:"font-bold text-xs text-gray-400"},n," posts")))}},6618:(e,t,n)=>{n.d(t,{H:()=>r,J:()=>l});var r=function(e,t,n,r){if(t(n)&&n!==r){var l=e.target,a=l.children[0];a&&(a.textContent="Unfollow",l.classList.add("hover:border-rose-200"),l.classList.add("hover:bg-rose-100"),l.classList.add("hover:text-red-500"))}},l=function(e){var t=e.target,n=t.children[0];t.classList.remove("hover:border-rose-200"),t.classList.remove("hover:bg-rose-100"),t.classList.remove("hover:text-red-500"),n&&"Unfollow"===n.textContent&&(n.textContent="Following")}},3695:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(5998),l=n(1257),a=n(9204),o=n(5017),s=n(4818);const c=function(){var e=(0,r.v9)((function(e){return e.me})),t=(0,r.I0)(),n=function(t){return!!e.followingIds.includes(t)};return{isFollowing:n,followHandler:function(r){var c,i=r.followerId,d=r.profileId;try{n(i)?(l.default.delete("/user/follow",{data:{followerId:i}}),t((0,o.ox)({meId:e.id,followerId:i,profileId:d})),t((0,s.ad)({followerId:i}))):(l.default.post("/user/follow",{followerId:i}),t((0,o.wC)({meId:e.id,followerId:i,profileId:d})),t((0,s.RK)({followerId:i})))}catch(e){if(console.log(e),e instanceof a.d7&&500===(null===(c=e.response)||void 0===c?void 0:c.status))return alert(e.response.data)}}}}},7685:(e,t,n)=>{n.d(t,{Z:()=>r});const r=(0,n(270).Ue)((function(e){return{isOpen:!1,onOpen:function(){return e({isOpen:!0})},onClose:function(){return e({isOpen:!1})}}}))},130:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(7294),l=n(9250),a=n(5998),o=n(8035),s=n(3743),c=n(6355),i=n(9338);const d=function(e){var t=e.coverImage,n=e.profileImage;return r.createElement("div",{className:"bg-gray-300 h-44 w-full relative"},t&&r.createElement("div",{className:"w-full h-full flex"},r.createElement("img",{src:(0,i.rd)(t),alt:"CoverImage",className:"w-full object-cover"})),r.createElement("div",{className:"\r w-[130px] \r h-[130px]\r flex \r border-4 \r border-white \r rounded-full \r absolute\r bottom-0\r translate-y-1/2\r translate-x-4\r cursor-pointer\r "},r.createElement("img",{src:(0,i.rd)(n),alt:"ProfileImage",referrerPolicy:"no-referrer",className:"\r w-full \r object-cover \r rounded-full \r hover:brightness-90 \r transition\r "})))};var f=n(5710),u=n(7516);const m=function(e){var t=e.username,n=e.userId,l=e.bio,a=e.createdAt,o=e.followingIdsLength,s=e.followerIdsLength;return r.createElement("div",{className:"mt-5 px-4 space-y-2"},r.createElement("div",{className:"flex flex-col"},r.createElement("span",{className:"font-bold text-lg"},t),r.createElement("span",{className:"text-base text-gray-400"},"@",n)),l.length>0&&r.createElement("span",{className:"block py-1 text-sm"},l),r.createElement("div",{className:"flex items-center gap-1 text-gray-500"},r.createElement(u.R1q,{size:20}),r.createElement("span",null,"Joined ",a&&(0,f.Z)(new Date(a),"MMMM yyyy"))),r.createElement("div",{className:"flex gap-5"},r.createElement("div",{className:"space-x-1"},r.createElement("span",{className:"font-bold"},o),r.createElement("span",{className:"text-gray-500"},"Following")),r.createElement("div",{className:"space-x-1"},r.createElement("span",{className:"font-bold"},s),r.createElement("span",{className:"text-gray-500"},"Followers"))))};var p=n(6618),v=n(5612),g=n(7685),E=n(3695);const w=function(e){var t=e.profile,n=e.profileId,l=(0,g.Z)(),o=(0,E.Z)(),s=o.isFollowing,c=o.followHandler,i=(0,a.v9)((function(e){return e.me}));return r.createElement("div",{className:"mt-3 flex justify-end mr-4"},r.createElement("button",{onMouseEnter:function(e){return(0,p.H)(e,s,t.id,i.id)},onMouseLeave:p.J,onClick:function(){return t.id===i.id?l.onOpen():n&&c({followerId:t.id,profileId:n})},className:"\n            py-2\n            px-5\n            flex\n            flex-row\n            justify-center\n            items-center\n            border-2\n            rounded-full\n            w-fit\n            transition\n            ".concat(v.yw,"\n            ").concat(v.dS,"\n            ").concat(v.Yy,"\n        ")},r.createElement("span",{className:"font-semibold"},t.id===i.id?"Edit profile":s(t.id)?"Following":"Follow")))};var h=n(8842),x=n(582),I=n(8759);var b=n(4276),N=n(5017);const y=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1],i=(0,r.useState)(!1),f=i[0],u=i[1],p=(0,l.UO)().userId,v=(0,a.v9)((function(e){return e.profile})),g=function(e){var t=(0,l.s0)(),n=(0,h.Z)(e?"/user/profile/".concat(e):null,I.Z,{onError:function(e){if(console.log(e),x.ZP.error(e.response.data),500===e.response.status)return alert(e.response.data);t("/home")}});return{data:n.data,mutate:n.mutate}}(p),E=g.data,y=g.mutate,k=(0,b.Z)({pathname:"/user/profile/".concat(p,"/post/all"),savedData:v.posts,isSameUrl:v.id===p}),Z=k.data,C=k.isValidating,L=k.mutate,F=k.hasMoreData,M=(0,l.s0)(),O=(0,a.I0)();return(0,r.useEffect)((function(){E&&(f||v.id===E.id||(u(!0),y().then((function(e){O((0,N.nY)(e)),u(!1)})).catch((function(e){return console.log(e)}))))}),[v.id,E,O,y,f]),(0,r.useEffect)((function(){F&&0===v.posts.length&&n(!0)}),[v.posts.length,F]),(0,r.useEffect)((function(){Z&&F&&t&&L().then((function(e){O((0,N.Ox)(e)),n(!1)})).catch((function(e){console.log(e)}))}),[t,L,Z,O,F]),r.createElement("div",{className:"relative h-full"},v.id!==p?r.createElement(c.Z,{size:80,absolute:!0,text:!0}):r.createElement(r.Fragment,null,r.createElement(o.Z,{title:v.username,length:v.totalPostsCount,onClick:function(){return M(-1)},backdropBlur:!0}),r.createElement(d,{coverImage:v.coverImage,profileImage:v.profileImage}),r.createElement(w,{profile:v,profileId:p}),r.createElement(m,{username:v.username,userId:v.id.slice(0,10),bio:v.bio,createdAt:v.createdAt,followingIdsLength:v.followingIds.length,followerIdsLength:v.followerIds.length}),r.createElement("hr",{className:"my-3"}),F&&0===v.posts.length?r.createElement(c.Z,{size:80,text:!0}):r.createElement(s.Z,{lists:v.posts,isValidating:C,isEnter:t,setIsEnter:n})))}}}]);