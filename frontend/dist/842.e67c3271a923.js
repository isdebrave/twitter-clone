"use strict";(self.webpackChunktwitter_clone=self.webpackChunktwitter_clone||[]).push([[842],{8842:(e,t,n)=>{n.d(t,{Z:()=>K});var r=n(7294),o=n(1688);const i=()=>{},s=i(),a=Object,c=e=>e===s,u=e=>"function"==typeof e,l=(e,t)=>({...e,...t}),d=new WeakMap;let f=0;const g=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,i;if(a(e)!==e||r||n==RegExp)o=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=d.get(e),o)return o;if(o=++f+"~",d.set(e,o),n==Array){for(o="@",i=0;i<e.length;i++)o+=g(e[i])+",";d.set(e,o)}if(n==a){o="#";const t=a.keys(e).sort();for(;!c(i=t.pop());)c(e[i])||(o+=i+":"+g(e[i])+",");d.set(e,o)}}return o},h=new WeakMap,w={},v={},p="undefined",y=typeof window!=p,m=typeof document!=p,b=(e,t)=>{const n=h.get(e);return[()=>!c(t)&&e.get(t)||w,r=>{if(!c(t)){const o=e.get(t);t in v||(v[t]=o),n[5](t,l(o,r),o||w)}},n[6],()=>!c(t)&&t in v?v[t]:!c(t)&&e.get(t)||w]};let _=!0;const[O,E]=y&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[i,i],R={isOnline:()=>_,isVisible:()=>{const e=m&&document.visibilityState;return c(e)||"hidden"!==e}},k={initFocus:e=>(m&&document.addEventListener("visibilitychange",e),O("focus",e),()=>{m&&document.removeEventListener("visibilitychange",e),E("focus",e)}),initReconnect:e=>{const t=()=>{_=!0,e()},n=()=>{_=!1};return O("online",t),O("offline",n),()=>{E("online",t),E("offline",n)}}},S=!r.useId,L=!y||"Deno"in window,T=L?r.useEffect:r.useLayoutEffect,V="undefined"!=typeof navigator&&navigator.connection,C=!L&&V&&(["slow-2g","2g"].includes(V.effectiveType)||V.saveData),D=e=>{if(u(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?g(e):"",t]};let I=0;const P=()=>++I;async function F(...e){const[t,n,r,o]=e,i=l({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{});let a=i.populateCache;const d=i.rollbackOnError;let f=i.optimisticData;const g=!1!==i.revalidate,w=i.throwOnError;if(u(n)){const e=n,r=[],o=t.keys();for(const n of o)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(v))}return v(n);async function v(n){const[o]=D(n);if(!o)return;const[i,l]=b(t,o),[v,p,y,m]=h.get(t),_=()=>{const e=v[o];return g&&(delete y[o],delete m[o],e&&e[0])?e[0](2).then((()=>i().data)):i().data};if(e.length<3)return _();let O,E=r;const R=P();p[o]=[R,0];const k=!c(f),S=i(),L=S.data,T=S._c,V=c(T)?L:T;if(k&&(f=u(f)?f(V,L):f,l({data:f,_c:V})),u(E))try{E=E(V)}catch(e){O=e}if(E&&u(E.then)){if(E=await E.catch((e=>{O=e})),R!==p[o][0]){if(O)throw O;return E}O&&k&&(e=>"function"==typeof d?d(e):!1!==d)(O)&&(a=!0,l({data:V,_c:s}))}if(a&&!O)if(u(a)){const e=a(E,V);l({data:e,error:s,_c:s})}else l({data:E,error:s,_c:s});if(p[o][1]=P(),Promise.resolve(_()).then((()=>{l({_c:s})})),!O)return E;if(w)throw O}}const M=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},W=(e,t)=>{if(!h.has(e)){const n=l(k,t),r={},o=F.bind(s,e);let a=i;const c={},u=(e,t)=>{const n=c[e]||[];return c[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},d=(t,n,r)=>{e.set(t,n);const o=c[t];if(o)for(const e of o)e(n,r)},f=()=>{if(!h.has(e)&&(h.set(e,[r,{},{},{},o,d,u]),!L)){const t=n.initFocus(setTimeout.bind(s,M.bind(s,r,0))),o=n.initReconnect(setTimeout.bind(s,M.bind(s,r,1)));a=()=>{t&&t(),o&&o(),h.delete(e)}}};return f(),[e,o,f,a]}return[e,h.get(e)[4]]},[x,A]=W(new Map),$=l({onLoadingSlow:i,onSuccess:i,onError:i,onErrorRetry:(e,t,n,r,o)=>{const i=n.errorRetryCount,s=o.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!c(i)&&s>i||setTimeout(r,a,o)},onDiscarded:i,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:C?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:C?5e3:3e3,compare:(e,t)=>g(e)==g(t),isPaused:()=>!1,cache:x,mutate:A,fallback:{}},R),j=(e,t)=>{const n=l(e,t);if(t){const{use:r,fallback:o}=e,{use:i,fallback:s}=t;r&&i&&(n.use=r.concat(i)),o&&s&&(n.fallback=l(o,s))}return n},q=(0,r.createContext)({}),J=y&&window.__SWR_DEVTOOLS_USE__,N=J?window.__SWR_DEVTOOLS_USE__:[],U=e=>u(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],H=N.concat((e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=D(t),[,,,o]=h.get(x);if(r.startsWith("$inf$"))return n(...e);const i=o[r];return c(i)?n(...e):(delete o[r],i)}),r)));J&&(window.__SWR_DEVTOOLS_REACT__=r);const Z=r.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),z={dedupe:!0},B=(a.defineProperty((e=>{const{value:t}=e,n=(0,r.useContext)(q),o=u(t),i=(0,r.useMemo)((()=>o?t(n):t),[o,n,t]),a=(0,r.useMemo)((()=>o?i:j(n,i)),[o,n,i]),c=i&&i.provider,d=(0,r.useRef)(s);c&&!d.current&&(d.current=W(c(a.cache||x),i));const f=d.current;return f&&(a.cache=f[0],a.mutate=f[1]),T((()=>{if(f)return f[2]&&f[2](),f[3]}),[]),(0,r.createElement)(q.Provider,l(e,{value:a}))}),"defaultValue",{value:$}),G=(e,t,n)=>{const{cache:i,compare:a,suspense:d,fallbackData:f,revalidateOnMount:g,revalidateIfStale:w,refreshInterval:v,refreshWhenHidden:m,refreshWhenOffline:_,keepPreviousData:O}=n,[E,R,k,V]=h.get(i),[C,I]=D(e),M=(0,r.useRef)(!1),W=(0,r.useRef)(!1),x=(0,r.useRef)(C),A=(0,r.useRef)(t),$=(0,r.useRef)(n),j=()=>$.current,q=()=>j().isVisible()&&j().isOnline(),[J,N,U,H]=b(i,C),B=(0,r.useRef)({}).current,G=c(f)?n.fallback[C]:f,K=(e,t)=>{for(const n in B){const r=n;if("data"===r){if(!a(e[r],t[r])){if(!c(e[r]))return!1;if(!a(ie,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},Q=(0,r.useMemo)((()=>{const e=!!C&&!!t&&(c(g)?!j().isPaused()&&!d&&(!!c(w)||w):g),n=t=>{const n=l(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=J(),o=H(),i=n(r),s=r===o?i:n(o);let a=i;return[()=>{const e=n(J());return K(e,a)?(a.data=e.data,a.isLoading=e.isLoading,a.isValidating=e.isValidating,a.error=e.error,a):(a=e,e)},()=>s]}),[i,C]),X=(0,o.useSyncExternalStore)((0,r.useCallback)((e=>U(C,((t,n)=>{K(n,t)||e()}))),[i,C]),Q[0],Q[1]),Y=!M.current,ee=E[C]&&E[C].length>0,te=X.data,ne=c(te)?G:te,re=X.error,oe=(0,r.useRef)(ne),ie=O?c(te)?oe.current:te:ne,se=!(ee&&!c(re))&&(Y&&!c(g)?g:!j().isPaused()&&(d?!c(ne)&&w:c(ne)||w)),ae=!!(C&&t&&Y&&se),ce=c(X.isValidating)?ae:X.isValidating,ue=c(X.isLoading)?ae:X.isLoading,le=(0,r.useCallback)((async e=>{const t=A.current;if(!C||!t||W.current||j().isPaused())return!1;let r,o,i=!0;const l=e||{},d=!k[C]||!l.dedupe,f=()=>S?!W.current&&C===x.current&&M.current:C===x.current,g={isValidating:!1,isLoading:!1},h=()=>{N(g)},w=()=>{const e=k[C];e&&e[1]===o&&delete k[C]},v={isValidating:!0};c(J().data)&&(v.isLoading=!0);try{if(d&&(N(v),n.loadingTimeout&&c(J().data)&&setTimeout((()=>{i&&f()&&j().onLoadingSlow(C,n)}),n.loadingTimeout),k[C]=[t(I),P()]),[r,o]=k[C],r=await r,d&&setTimeout(w,n.dedupingInterval),!k[C]||k[C][1]!==o)return d&&f()&&j().onDiscarded(C),!1;g.error=s;const e=R[C];if(!c(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return h(),d&&f()&&j().onDiscarded(C),!1;const u=J().data;g.data=a(u,r)?u:r,d&&f()&&j().onSuccess(r,C,n)}catch(e){w();const t=j(),{shouldRetryOnError:n}=t;t.isPaused()||(g.error=e,d&&f()&&(t.onError(e,C,t),(!0===n||u(n)&&n(e))&&q()&&t.onErrorRetry(e,C,t,(e=>{const t=E[C];t&&t[0]&&t[0](3,e)}),{retryCount:(l.retryCount||0)+1,dedupe:!0})))}return i=!1,h(),!0}),[C,i]),de=(0,r.useCallback)(((...e)=>F(i,x.current,...e)),[]);if(T((()=>{A.current=t,$.current=n,c(te)||(oe.current=te)})),T((()=>{if(!C)return;const e=le.bind(s,z);let t=0;const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(C,E,((n,r={})=>{if(0==n){const n=Date.now();j().revalidateOnFocus&&n>t&&q()&&(t=n+j().focusThrottleInterval,e())}else if(1==n)j().revalidateOnReconnect&&q()&&e();else{if(2==n)return le();if(3==n)return le(r)}}));return W.current=!1,x.current=C,M.current=!0,N({_k:I}),se&&(c(ne)||L?e():(r=e,y&&typeof window.requestAnimationFrame!=p?window.requestAnimationFrame(r):setTimeout(r,1))),()=>{W.current=!0,n()};var r}),[C]),T((()=>{let e;function t(){const t=u(v)?v(J().data):v;t&&-1!==e&&(e=setTimeout(n,t))}function n(){J().error||!m&&!j().isVisible()||!_&&!j().isOnline()?t():le(z).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[v,m,_,C]),(0,r.useDebugValue)(ie),d&&c(ne)&&C){if(!S&&L)throw new Error("Fallback data is required when using suspense in SSR.");A.current=t,$.current=n,W.current=!1;const e=V[C];if(!c(e)){const t=de(e);Z(t)}if(!c(re))throw re;{const e=le(z);c(ie)||(e.status="fulfilled",e.value=!0),Z(e)}}return{mutate:de,get data(){return B.data=!0,ie},get error(){return B.error=!0,re},get isValidating(){return B.isValidating=!0,ce},get isLoading(){return B.isLoading=!0,ue}}},function(...e){const t=l($,(0,r.useContext)(q)),[n,o,i]=U(e),s=j(t,i);let a=G;const{use:c}=s,u=(c||[]).concat(H);for(let e=u.length;e--;)a=u[e](a);return a(n,o||s.fetcher||null,s)});var G;const K=((e,t)=>(...n)=>{const[r,o,i]=U(n),s=(i.use||[]).concat(t);return e(r,o,{...i,use:s})})(B,(e=>(t,n,r)=>(r.revalidateOnFocus=!1,r.revalidateIfStale=!1,r.revalidateOnReconnect=!1,e(t,n,r))))}}]);