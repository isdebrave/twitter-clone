"use strict";(self.webpackChunktwitter_clone=self.webpackChunktwitter_clone||[]).push([[148],{2168:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(7294);const o=function(e){var t=e.onClick,n=e.icon,o=e.length,a=e.textHover,c=e.bgHover,i=e.textColor;return r.createElement("div",{className:"flex items-center group cursor-pointer",onClick:t},r.createElement("div",{className:"\n          p-2 \n          rounded-full \n          ".concat(c," \n          transition \n          translate-y-[1px]\n        ")},r.createElement(n,{size:20,className:"".concat(i," ").concat(a," transition")})),r.createElement("span",{className:"".concat(i," ").concat(a," transition")},o))}},5539:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(7294);const o=function(e){var t=e.onClick,n=e.imagesCount,o=e.children;return 1===n||2===n?r.createElement("div",{onClick:t,className:"\n          ".concat(2===n&&"h-[280px]","\n          flex \n          gap-1 \n          border \n          rounded-2xl \n          overflow-hidden \n          border-slate-300\n          hover:bg-sky-100\n          cursor-pointer\n        ")},o):r.createElement("div",{onClick:t,className:"\r h-[280px] \r grid \r grid-rows-2 \r grid-flow-col \r gap-1 \r border\r rounded-2xl \r overflow-hidden \r border-slate-300\r hover:bg-sky-100\r cursor-pointer\r "},o)}},3743:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(7294),o=n(5998),a=n(7516),c=n(9250),i=n(582),s=(n(6265),n(8020)),l=n(155),u=n(1257),d=n(9204),f=n(5539),m=n(2898),p=n(9338),v=n(4909),g=n(3324),h=n(5017),b=n(1133);const x=function(e){var t=e.onClick,n=e.username,a=e.userId,x=e.isPosts,E=e.postId,k=e.commentId,y=e.createdAt,I=e.body,w=e.images,N=(0,r.useState)(!1),C=N[0],Z=N[1],P=(0,o.v9)((function(e){return e.me})),S=(0,c.s0)(),H=(0,o.I0)();return(0,r.useEffect)((function(){var e=function(){return Z(!1)};return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}}),[]),r.createElement(r.Fragment,null,r.createElement("div",{className:"relative"},r.createElement("div",{className:"space-x-2"},r.createElement("span",{className:"font-bold hover:underline cursor-pointer",onClick:t},n),r.createElement("span",{className:"text-gray-500 hidden sm:inline-block"},"@",a.slice(0,10)," ▪"),r.createElement("span",{className:"text-gray-500"},(0,s.Z)(new Date(y)))),P.id===a&&r.createElement(r.Fragment,null,r.createElement("div",{onClick:(0,m.E)((function(){return x&&(0,v.h)(E)?i.ZP.error("포스트 등록 중입니다."):!x&&(0,v.h)(k)?i.ZP.error("댓글 등록 중입니다."):void Z(!0)})),className:"\r absolute \r -top-1 \r right-0\r p-2 \r rounded-full \r text-gray-600 \r hover:text-sky-500 \r hover:bg-sky-100\r cursor-pointer\r "},r.createElement(l.Ppk,{size:18})),C&&r.createElement("div",{onClick:function(e){return t=void 0,n=void 0,o=function(){var t;return function(e,t){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){e.stopPropagation();try{x?(u.default.delete("/post",{data:{postId:E}}),H((0,g.XQ)({postId:E})),H((0,h.eh)({postId:E}))):(u.default.delete("/post/".concat(E,"/comment"),{data:{commentId:k}}),H((0,b.te)({commentId:k})),H((0,g.hH)({postId:E,commentId:k})),H((0,h.nX)({postId:E,commentId:k})))}catch(e){if(console.log(e),e instanceof d.d7&&500===(null===(t=e.response)||void 0===t?void 0:t.status))return[2,alert(e.response.data)]}return[2]}))},new((r=void 0)||(r=Promise))((function(e,a){function c(e){try{s(o.next(e))}catch(e){a(e)}}function i(e){try{s(o.throw(e))}catch(e){a(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(c,i)}s((o=o.apply(t,n||[])).next())}));var t,n,r,o},className:"\r absolute\r -top-1 \r right-0\r py-3 \r px-2\r rounded-xl \r bg-white \r text-red-500\r flex\r items-center\r font-semibold\r hover:bg-slate-100\r w-[300px]\r gap-2\r cursor-pointer\r ",style:{boxShadow:"0 0 5px rgba(0, 0, 0, 0.2)"}},r.createElement(l.L_o,{size:18}),r.createElement("span",null,"Delete")))),r.createElement("p",{className:"text-gray-600 mb-2"},I),w.length>0&&r.createElement(f.Z,{onClick:(0,m.E)((function(){if(x&&(0,v.h)(E))return i.ZP.error("포스트 등록 중입니다.");S("/".concat(a.slice(0,10),"/status/").concat(E,"/photo"))})),imagesCount:w.length},w.map((function(e,t){return r.createElement("div",{key:e+t,className:"\n              w-full \n              flex\n              ".concat(3===w.length&&0===t&&"row-span-2","\n            ")},r.createElement("img",{src:(0,p.rd)(e),alt:"BodyImage",className:"w-full object-cover"}))}))))};var E=n(2168),k=n(3326),y=n(4801),I=n(6355);const w=function(e){var t=e.lists,n=e.isValidating,s=e.isEnter,l=e.setIsEnter,u=e.text,d=(0,r.useState)(!1),f=d[0],g=d[1],h=(0,r.useState)(),b=h[0],w=h[1],N=(0,r.useCallback)((function(e){return w(e)}),[]),C=(0,k.Z)().likedHandler,Z=(0,y.Z)(),P=(0,o.v9)((function(e){return e.me})),S=(0,c.s0)();return(0,r.useEffect)((function(){t&&t[0]&&"views"in t[0]&&g(!0)}),[t]),(0,r.useEffect)((function(){var e=new IntersectionObserver((function(e){var t=e[0];!s&&t.isIntersecting&&l(!0)}),{threshold:0});return b&&e.observe(b),function(){b&&e.unobserve(b),e&&e.disconnect()}}),[s,l,b]),0===t.length?r.createElement("span",{className:"block text-neutral-500 text-center p-6 text-xl"},u||"포스팅이 없습니다."):r.createElement(r.Fragment,null,t.map((function(e,n){return r.createElement("div",{ref:n===t.length-2?N:null,key:e.id,onClick:f?(0,m.E)((function(){if((0,v.h)(e.id))return i.ZP.error("포스트 등록 중입니다.");S("/".concat(e.user.id,"/status/").concat(e.id))})):void 0,className:f?"cursor-pointer":""},r.createElement("div",{className:"\n              ".concat(f?"p-3 px-4":"py-4","\n              ").concat(f?"hover:bg-neutral-300/20":"","\n            ")},r.createElement("div",{className:"flex gap-3"},r.createElement("div",{onClick:(0,m.E)((function(){return S("/".concat(e.user.id))})),className:"\r w-[40px]\r h-[40px]\r flex\r rounded-full\r overflow-hidden\r hover:brightness-90\r transition\r cursor-pointer\r "},r.createElement("img",{src:(0,p.rd)(e.user.profileImage),alt:"ProfileImage",referrerPolicy:"no-referrer",className:"w-full object-cover"})),r.createElement("div",{className:"flex-1"},r.createElement(x,{onClick:(0,m.E)((function(){return S("/".concat(e.user.id))})),username:e.user.username,userId:e.user.id,isPosts:f,postId:f?e.id:e.postId,commentId:f?"":e.id,createdAt:e.createdAt,body:e.body,images:f?e.images:[]}),f&&r.createElement("div",{className:"flex gap-10"},r.createElement(E.Z,{onClick:(0,m.E)((function(){if((0,v.h)(e.id))return i.ZP.error("포스트 등록 중입니다.");Z.onPost(e),Z.onOpen()})),icon:a.scr,length:e.totalCommentsCount,textHover:"group-hover:text-sky-500",bgHover:"group-hover:bg-sky-200/40",textColor:"text-gray-500"}),r.createElement(E.Z,{onClick:(0,m.E)((function(){if((0,v.h)(e.id))return i.ZP.error("포스트 등록 중입니다.");C(e)})),icon:(0,v.o)(e.likedIds,P.id)?a.SEb:a.kTx,length:e.likedIds.length,textHover:"group-hover:text-rose-500",bgHover:"group-hover:bg-rose-200/40",textColor:(0,v.o)(e.likedIds,P.id)?"text-rose-500":"text-gray-500"}))))))})),n&&r.createElement(I.Z,{size:50}))}},6355:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(7294),o=n(7473);const a=function(e){var t=e.size,n=e.fixed,a=e.absolute,c=e.text;return r.createElement("div",{className:"\n        ".concat(n&&"fixed","\n        ").concat(n&&"inset-0","\n        ").concat(n&&"bg-neutral-800/70","\n        ").concat(a&&"absolute","\n        ").concat(a&&"h-full","\n        z-50\n        w-full\n        flex\n        flex-col\n        justify-center \n        items-center \n      ")},r.createElement(o.Z,{color:"lightblue",size:t}),c&&r.createElement("span",{className:"".concat(n&&"text-white")},"Loading..."))}},5612:(e,t,n)=>{n.d(t,{$l:()=>c,Am:()=>r,Ay:()=>u,GW:()=>o,It:()=>f,Oz:()=>l,Yy:()=>d,dS:()=>i,kt:()=>s,yw:()=>a});var r="bg-sky-500 border-sky-500",o="bg-black",a="bg-white",c="text-sky-500",i="text-black",s="text-white",l="hover:bg-sky-100",u="hover:border-sky-600 hover:bg-sky-600",d="hover:bg-neutral-300/40",f="hover:opacity-80"},2898:(e,t,n)=>{n.d(t,{E:()=>r});var r=function(e){return function(t){t.stopPropagation(),e()}}},9338:(e,t,n)=>{n.d(t,{Nf:()=>c,od:()=>a,rd:()=>o});var r=n(582),o=function(e){return 0===e.length?"/images/anonymous.jpg":"https://source.unsplash.com/random/300×300"},a=function(e,t,n,o){var a=e.target.files;if(a){if(o&&a.length+o.length>4)return r.ZP.error("최대 4개까지 선택 가능합니다.");for(var c=0;c<a.length;c++){t(a[c]);var i=new FileReader;i.readAsDataURL(a[c]),i.onload=function(e){e.target&&n(e.target.result)}}}},c=function(e,t,n,r,o,a){if(t.current&&(t.current.value=""),a&&o){var c=parseInt(e.target.getAttribute("data-idx")||"",10);return n(o.filter((function(e,t){return t!==c}))),void r(a.filter((function(e,t){return t!==c})))}n(),r()}},4909:(e,t,n)=>{n.d(t,{h:()=>r,o:()=>o});var r=function(e){return"number"==typeof e},o=function(e,t){return!!e.includes(t)}},4801:(e,t,n)=>{n.d(t,{Z:()=>r});const r=(0,n(270).Ue)((function(e){return{isOpen:!1,post:null,onOpen:function(){return e({isOpen:!0})},onClose:function(){return e({isOpen:!1})},onPost:function(t){return e({post:t})}}}))},3326:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(5998),o=n(1257),a=n(9204),c=n(1133),i=n(3324),s=n(5017);const l=function(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.me})),n=(0,r.v9)((function(e){return e.post})),l=(0,r.v9)((function(e){return e.posts})),u=(0,r.v9)((function(e){return e.profile})),d=function(e,t){return e.find((function(e){return e===t}))};return{likedHandler:function(r){var f;try{o.default.post("/post/liked",{postId:r.id}),r.user.id===t.id||d(r.likedIds,t.id)||o.default.post("/notification",{body:"".concat(t.username," 님이 ").concat(r.id.slice(0,10)," 포스트에 좋아요를 눌렀습니다."),userId:r.user.id});var m=n.likedIds;e((0,c.Sv)({isExists:d(m,t.id),userId:t.id})),m=l.find((function(e){return e.id===r.id})).likedIds,e((0,i.O1)({isExists:d(m,t.id),userId:t.id,postId:r.id})),u.posts.length>0&&(m=u.posts.find((function(e){return e.id===r.id})).likedIds,e((0,s.$I)({isExists:d(m,t.id),userId:t.id,postId:r.id})))}catch(e){if(console.log(e),e instanceof a.d7&&500===(null===(f=e.response)||void 0===f?void 0:f.status))return alert(e.response.data)}}}}},4276:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(7294),o=n(8842),a=n(8759);const c=function(e){var t=e.pathname,n=e.savedData,c=e.isSameUrl,i=(0,r.useState)(!0),s=i[0],l=i[1],u=(0,r.useState)("0"),d=u[0],f=u[1];(0,r.useEffect)((function(){c&&n.length>0&&f(n[n.length-1].id)}),[n,c]);var m=(0,o.Z)("".concat(t,"?lastId=").concat(d,"&limit=3"),a.Z,{onError:function(e){return console.log(e)}}),p=m.data,v=m.isValidating,g=m.mutate;return(0,r.useEffect)((function(){p&&0===p.length&&l(!1)}),[p]),{data:p,isValidating:v,mutate:g,hasMoreData:s,setLastId:f}}},8759:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(1257);const o=function(e){return r.default.get(e).then((function(e){return e.data}))}}}]);